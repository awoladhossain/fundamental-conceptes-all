# ЁЯЫТ ржбрзЗржЯрж╛ржмрзЗрж╕ ржирж░рзНржорж╛рж▓рж╛ржЗржЬрзЗрж╢ржи

## рзз. 1NF (ржПржХ ржШрж░рзЗ ржПржХржЬржи)
**рж╕ржорж╕рзНржпрж╛:** ржПржХ рж╕рзЗрж▓рзЗрж░ ржнрзЗрждрж░ ржХржорж╛ ржжрж┐рзЯрзЗ ржЕржирзЗржХржЧрзБрж▓рзЛ ржирж╛ржо рж▓рзЗржЦрж╛ (ржпрзЗржоржи: SQL, Java, PHP)ред

**рж╕ржорж╛ржзрж╛ржи:** ржкрзНрж░рждрж┐ржЯрж╛ ржШрж░рзЗ ржорж╛рждрзНрж░ ржПржХржЯрж╛ ржбрзЗржЯрж╛ ржерж╛ржХржмрзЗред ржПржХрзЗрж░ ржЕржзрж┐ржХ рж╕рж╛ржмржЬрзЗржХрзНржЯ ржерж╛ржХрж▓рзЗ ржЖрж▓рж╛ржжрж╛ рж░рзЛ (Row) ржмрж╛ржирж╛ржиред

> **ржорзВрж▓ ржХржерж╛:** ржПржХ рж░рзБржорзЗ ржПржХржЬржиржЗ ржерж╛ржХржмрзЗ, ржЬржЧрж╛ржЦрж┐ржЪрзБрзЬрж┐ ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред

---

## рзи. 2NF (ржЕрж░рзНржзрзЗржХ ржнрж╛рж▓рзЛржмрж╛рж╕рж╛ ржЪрж▓ржмрзЗ ржирж╛)
ржПржЯрж╛ рждржЦржиржЗ ржЪрзЗржХ ржХрж░ржмрзЗржи ржпржЦржи ржЖржкржирж╛рж░ **Primary Key** ржжрзБржЗржЯрж╛ ржХрж▓рж╛ржо ржорж┐рж▓рзЗ рж╣рзЯ (ржпрзЗржоржи: Student_ID + Course_ID)ред

**рж╕ржорж╕рзНржпрж╛:** ржпржжрж┐ ржПржоржи ржХрзЛржирзЛ ржХрж▓рж╛ржо ржерж╛ржХрзЗ ржпрж╛ рж╢рзБржзрзБ `Course_ID`-рж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ `Student_ID`-рж░ рж╕рж╛ржерзЗ рждрж╛рж░ ржХрзЛржирзЛ рж╕ржорзНржкрж░рзНржХ ржирзЗржЗред

**рж╕ржорж╛ржзрж╛ржи:** ржУржЗ ржХрж▓рж╛ржоржЯрж╛ржХрзЗ рж▓рж╛ржерж┐ ржжрж┐рзЯрзЗ ржмрзЗрж░ ржХрж░рзЗ ржЖрж▓рж╛ржжрж╛ ржЯрзЗржмрж┐рж▓ ржмрж╛ржирж┐рзЯрзЗ ржжрж┐ржиред

> **ржорзВрж▓ ржХржерж╛:** ржпржжрж┐ ржЬрзЛрзЬрж╛ (Composite) ржЪрж╛ржмрж┐ ржерж╛ржХрзЗ, рждржмрзЗ ржмрж╛ржХрж┐ рж╕ржм ржХрж▓рж╛ржоржХрзЗ ржУржЗ ржжрзБржЗ ржЪрж╛ржмрж┐рж░ ржУржкрж░ржЗ ржирж┐рж░рзНржнрж░ ржХрж░рждрзЗ рж╣ржмрзЗред ржПржХржЬржирзЗрж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рж▓рзЗ рж╣ржмрзЗ ржирж╛ред

---

## рзй. 3NF (ржмржирзНржзрзБрждрзНржмрзЗ ржжрж╛рж▓рж╛рж▓рж┐ ржЪрж▓ржмрзЗ ржирж╛)
**рж╕ржорж╕рзНржпрж╛:** ржзрж░рзБржи, `ID` ржЪрзЗржирзЗ `Name`-ржХрзЗ, ржЖрж░ `Name` ржЪрзЗржирзЗ `Address`-ржХрзЗред ржПржЦржи `Address` ржХрж┐ржирзНрждрзБ `ID`-рж░ ржУржкрж░ рж╕рж░рж╛рж╕рж░рж┐ ржирж┐рж░рзНржнрж░ ржирж╛ ржХрж░рзЗ `Name`-ржПрж░ ржУржкрж░ ржжрж╛рж▓рж╛рж▓рж┐ ржХрж░ржЫрзЗред

**рж╕ржорж╛ржзрж╛ржи:** ржПржЗ ржжрж╛рж▓рж╛рж▓рж┐ ржмржирзНржз ржХрж░рждрзЗ `Name` ржЖрж░ `Address`-ржХрзЗ ржЖрж▓рж╛ржжрж╛ ржЯрзЗржмрж┐рж▓рзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржиред

> **ржорзВрж▓ ржХржерж╛:** Non-key ржХрж▓рж╛ржо ржпрзЗржи ржЕржирзНржп ржХрзЛржирзЛ Non-key ржХрж▓рж╛ржорзЗрж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржирж╛ ржХрж░рзЗред рж╕ржмрж╛ржЗ рж╢рзБржзрзБ "Primary Key"-рж░ ржЧрзЛрж▓рж╛ржо рж╣ржмрзЗред

---

## рзк. BCNF (ржмрж╕ ржЗржЬ ржЕрж▓ржУрзЯрзЗржЬ рж░рж╛ржЗржЯ)
ржПржЯрж╛ 3NF-ржПрж░ ржмрзЬ ржнрж╛ржЗред
**рж╢рж░рзНржд:** ржПржХржЯрж┐ ржлрж╛ржВрж╢ржирж╛рж▓ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ $X \rightarrow Y$ рж╣рж▓рзЗ, $X$-ржХрзЗ ржЕржмрж╢рзНржпржЗ ржПржХржЯрж┐ **Super Key** рж╣рждрзЗ рж╣ржмрзЗред

**рж╕ржорж╕рзНржпрж╛:** ржзрж░рзБржи, ржЯрзЗржмрж┐рж▓рзЗ ржПржоржи ржПржХржЯрж╛ ржХрж▓рж╛ржо ржЖржЫрзЗ ржпрж╛ ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрж┐ ржирж╛, ржХрж┐ржирзНрждрзБ рж╕рзЗ ржЕржирзНржп ржХрж╛ржЙржХрзЗ ржХржирзНржЯрзНрж░рзЛрж▓ (Determine) ржХрж░ржЫрзЗред

**рж╕ржорж╛ржзрж╛ржи:** ржпрзЗ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░ржмрзЗ, рждрж╛ржХрзЗ ржЕржмрж╢рзНржпржЗ "ржмрж╕" (Primary Key/Super Key) рж╣рждрзЗ рж╣ржмрзЗред ржпржжрж┐ рж╕рзЗ ржмрж╕ ржирж╛ рж╣рзЯ, рждрж╛ржХрзЗ ржЖрж▓рж╛ржжрж╛ ржЯрзЗржмрж┐рж▓ ржжрж┐рзЯрзЗ ржмрж╕ ржмрж╛ржирж┐рзЯрзЗ ржжрж┐ржиред

> **ржорзВрж▓ ржХржерж╛:** ржЯрзЗржмрж┐рж▓рзЗ ржпржжрж┐ ржХрзЗржЙ ржХрж╛ржЙржХрзЗ ржЪрзЗржирзЗ, рждржмрзЗ ржмрж╛ржо ржкрж╛рж╢рзЗрж░ ржорж╛ржирзБрж╖ржЯрж╛ржХрзЗ (Determinant) ржЕржмрж╢рзНржпржЗ ржЯрзЗржмрж┐рж▓рзЗрж░ ржмрж╕ (Key) рж╣рждрзЗ рж╣ржмрзЗред

---

### ржПржХ ржиржЬрж░рзЗ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЯрзНрж░рж┐ржХ:
1. **1NF:** рж╕рж┐ржЩрзНржЧрзЗрж▓ ржнрзНржпрж╛рж▓рзБред
2. **2NF:** ржкрж╛рж░рзНрж╢рж┐рзЯрж╛рж▓ (ржЖржВрж╢рж┐ржХ) ржирж┐рж░рзНржнрж░рждрж╛ ржмрж╛ржжред
3. **3NF:** ржнрж╛рзЯрж╛ ржмрж╛ ржжрж╛рж▓рж╛рж▓рж┐ ржмрж╛ржжред
4. **BCNF:** ржпрзЗ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░ржмрзЗ рж╕рзЗ-ржЗ ржмрж╕ (Key)ред

___

# ЁЯЪА N+1 Query Problem

## ЁЯзР N+1 рж╕ржорж╕рзНржпрж╛ржЯрж╛ ржЖрж╕рж▓рзЗ ржХрзА?
ржзрж░рзБржи, ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ рзиржЯрж╛ ржЯрзЗржмрж┐рж▓ ржЖржЫрзЗ:
рзз. **Author** (рж▓рзЗржЦржХ)
реи. **Books** (ржмржЗ)

ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗржи: **"рж╕ржм рж▓рзЗржЦржХрзЗрж░ ржирж╛ржо ржПржмржВ рждрж╛ржжрзЗрж░ рж▓рзЗржЦрж╛ ржмржЗржЧрзБрж▓рзЛрж░ ржЯрж╛ржЗржЯрзЗрж▓ ржжрзЗржЦрж╛ржмрзЗржиред"**

### ржнрзБрж▓ ржЙржкрж╛рзЯ (ржпрзЗржнрж╛ржмрзЗ N+1 рждрзИрж░рж┐ рж╣рзЯ):
рзз. ржкрзНрж░ржержорзЗ ржЖржкржирж┐ ржПржХржЯрж╛ ржХрзБрзЯрзЗрж░рж┐ ржХрж░рж▓рзЗржи рж╕ржм рж▓рзЗржЦржХржХрзЗ ржЖржирждрзЗ:
   `SELECT * FROM authors;` (ржПржЯрж╛ рж╣рж▓рзЛ **1** ржиржорзНржмрж░ ржХрзБрзЯрзЗрж░рж┐)

рзи. ржПржЦржи ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ рззрзж ржЬржи рж▓рзЗржЦржХ ржЖржЫрзЗред ржЖржкржирж┐ ржПржХржЯрж╛ рж▓рзБржк ржЪрж╛рж▓рж╛рж▓рзЗржи рждрж╛ржжрзЗрж░ ржмржЗржЧрзБрж▓рзЛ ржмрзЗрж░ ржХрж░рждрзЗ:
   - рж▓рзЗржЦржХ рзз ржПрж░ ржЬржирзНржп: `SELECT * FROM books WHERE author_id = 1;`
   - рж▓рзЗржЦржХ рзи ржПрж░ ржЬржирзНржп: `SELECT * FROM books WHERE author_id = 2;`
   - ... ржПржнрж╛ржмрзЗ рззрзж ржЬржирзЗрж░ ржЬржирзНржп рззрзж ржмрж╛рж░ред (ржПржЧрзБрж▓рзЛ рж╣рж▓рзЛ **N** рж╕ржВржЦрзНржпржХ ржХрзБрзЯрзЗрж░рж┐)

**ржлрж▓рж╛ржлрж▓:** рззржЯрж╛ ржХрзБрзЯрзЗрж░рж┐ ржкрзНрж▓рж╛рж╕ рззрзжржЯрж╛ ржХрзБрзЯрзЗрж░рж┐ = рззрззржЯрж╛ ржХрзБрзЯрзЗрж░рж┐ред ржПржЯрж╛ржЗ **N + 1** рж╕ржорж╕рзНржпрж╛ред рж▓рзЗржЦржХрзЗрж░ рж╕ржВржЦрзНржпрж╛ рззрзжрзжрзж рж╣рж▓рзЗ ржЖржкржирж╛рж░ ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ рззрзжрзжрзз ржмрж╛рж░ ржХрзБрзЯрзЗрж░рж┐ рж╣ржмрзЗ, ржпрж╛ ржЖржкржирж╛рж░ ржУрзЯрзЗржмрж╕рж╛ржЗржЯржХрзЗ рж╕рзНрж▓рзЛ ржХрж░рзЗ ржжрж┐ржмрзЗред

---

## тЭМ ржХрзЗржи ржПржЯрж╛ ржЦрж╛рж░рж╛ржк?
- ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ ржпржд ржмрзЗрж╢рж┐ржмрж╛рж░ ржпрж╛рждрж╛рзЯрж╛ржд ржХрж░ржмрзЗржи, рж╕ржорзЯ рждржд ржмрзЗрж╢рж┐ рж▓рж╛ржЧржмрзЗред
- рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржУржкрж░ ржЕржирзЗржХ ржЪрж╛ржк ржкрзЬрзЗред
- ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржПржХржжржо ржХржорзЗ ржпрж╛рзЯред

---

## тЬЕ рж╕ржорж╛ржзрж╛ржи ржХрзА? (Eager Loading)
рж╕ржорж╛ржзрж╛ржи рж╣рж▓рзЛ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ржХрзБрзЯрзЗрж░рж┐ ржирж╛ ржХрж░рзЗ **JOIN** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЕржержмрж╛ рж╕ржм ржбрзЗржЯрж╛ ржПржХржмрж╛рж░рзЗ ржирж┐рзЯрзЗ ржЖрж╕рж╛ред

### рзз. SQL Join ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ:
`SELECT authors.name, books.title FROM authors JOIN books ON authors.id = books.author_id;`
(ржПржЦрж╛ржирзЗ ржорж╛рждрзНрж░ **рззржЯрж╛** ржХрзБрзЯрзЗрж░рж┐рждрзЗржЗ рж╕ржм ржбрзЗржЯрж╛ ржЪрж▓рзЗ ржЖрж╕ржмрзЗ!)

### рзи. ORM (ржпрзЗржоржи: Eloquent ржмрж╛ TypeORM) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ:
рж▓рзБржкрзЗрж░ ржнрзЗрждрж░ ржХрзБрзЯрзЗрж░рж┐ ржирж╛ ржХрж░рзЗ рж╢рзБрж░рзБрждрзЗржЗ `with` ржмрж╛ `include` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред
- **ржЦрж╛рж░рж╛ржк:** `$authors = Author::all();` (ржкрж░рзЗ рж▓рзБржкрзЗ ржмржЗ ржЦрзБржБржЬрж▓рзЗ N+1 рж╣ржмрзЗ)
- **ржнрж╛рж▓рзЛ:** `$authors = Author::with('books')->get();` (ржПржХржмрж╛рж░рзЗ рж╕ржм ржмржЗрж╕рж╣ ржирж┐рзЯрзЗ ржЖрж╕ржмрзЗ)

---

## ЁЯТб ржоржирзЗ рж░рж╛ржЦрж╛рж░ рж╕рж╣ржЬ ржмрзБржжрзНржзрж┐
- **N+1:** ржорж╛рж░рзНржХрзЗржЯрзЗ ржЧрж┐рзЯрзЗ рззрзжржЯрж╛ ржЖржЗржЯрзЗржо ржХрзЗржирж╛рж░ ржЬржирзНржп рззрзж ржмрж╛рж░ ржмрж╛рж╕рж╛рзЯ ржЖрж╕рж╛ ржЖрж░ ржжрзЛржХрж╛ржирзЗ ржпрж╛ржУрзЯрж╛ред (ржмрзЛржХрж╛ржорж┐!)
- **Solution:** ржПржХржмрж╛рж░рзЗ рж▓рж┐рж╕рзНржЯ ржирж┐рзЯрзЗ ржЧрж┐рзЯрзЗ рж╕ржм ржЖржЗржЯрзЗржо ржПржХ ржмрзНржпрж╛ржЧрзЗ ржХрж░рзЗ ржирж┐рзЯрзЗ ржЖрж╕рж╛ред (ржмрзБржжрзНржзрж┐ржорж╛ржи!)

___

# ЁЯФЧ Database Relationships

рж░рж┐рж▓рзЗрж╢ржи ржмрзЗрж░ ржХрж░рж╛рж░ рж╕ржорзЯ рж╕ржмрж╕ржорзЯ **ржЙржнрзЯ ржжрж┐ржХ (Both Sides)** ржерзЗржХрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░ржмрзЗржиред

### рзз. One-to-One (рзз : рзз)
**рж╕рзВрждрзНрж░:** ржПржХржЬржирзЗрж░ ржЬржирзНржп ржПржХржЯрж╛ржЗред
* **ржЙржжрж╛рж╣рж░ржг:** `User` ржПржмржВ `User_Profile` (ржЕржержмрж╛ NID)ред
* **ржЯрзЗрж╕рзНржЯ:** - ржПржХржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ ржХрзЯржЯрж╛ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржерж╛ржХрзЗ? -> рззржЯрж╛ред
    - ржПржХржЯрж╛ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржХрзЯржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ рж╣рзЯ? -> рззржЯрж╛ред
* **ржЯрзЗржмрж┐рж▓ ржЪрзЗржирж╛рж░ ржЙржкрж╛рзЯ:** рж╕рж╛ржзрж╛рж░ржгржд `Profile` ржЯрзЗржмрж┐рж▓рзЗ `user_id` ржерж╛ржХрзЗ ржПржмржВ рж╕рзЗржЯрж╛ **Unique** рж╣рзЯред

---

### рзи. One-to-Many (рзз : M) тАФ рж╕ржмржЪрж╛ржЗрждрзЗ ржХржоржи!
**рж╕рзВрждрзНрж░:** ржПржХржЬржирзЗрж░ ржЕржирзЗржХржЧрзБрж▓рзЛ, ржХрж┐ржирзНрждрзБ ржУржЗ ржЕржирзЗржХржЧрзБрж▓рзЛрж░ ржорж╛рж▓рж┐ржХ ржПржХржЬржиржЗред
* **ржЙржжрж╛рж╣рж░ржг:** `Customer` ржПржмржВ `Orders`ред
* **ржЯрзЗрж╕рзНржЯ:** - ржПржХржЬржи ржХрж╛рж╕рзНржЯржорж╛рж░ ржХрзЯржЯрж╛ ржЕрж░рзНржбрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗ? -> ржЕржирзЗржХржЧрзБрж▓рзЛ (Many)ред
    - ржПржХржЯрж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЕрж░рзНржбрж╛рж░рзЗрж░ (ID: 501) ржорж╛рж▓рж┐ржХ ржХрзЯржЬржи? -> ржорж╛рждрзНрж░ рзз ржЬржи (One)ред
* **ржЯрзЗржмрж┐рж▓ ржЪрзЗржирж╛рж░ ржЙржкрж╛рзЯ:** "Many" ржПрж░ ржжрж┐ржХрзЗ (Orders ржЯрзЗржмрж┐рж▓) `customer_id` ржмрж╛ Foreign Key ржерж╛ржХржмрзЗред



---

### рзй. Many-to-Many (M : M)
**рж╕рзВрждрзНрж░:** ржЙржнрзЯ ржжрж┐ржХрзЗржЗ "ржЕржирзЗржХржЧрзБрж▓рзЛ" рж╣ржУрзЯрж╛рж░ рж╕рзБржпрзЛржЧ ржЖржЫрзЗред
* **ржЙржжрж╛рж╣рж░ржг:** `Student` ржПржмржВ `Course`ред
* **ржЯрзЗрж╕рзНржЯ:** - ржПржХржЬржи рж╕рзНржЯрзБржбрзЗржирзНржЯ ржХрзЯржЯрж╛ ржХрзЛрж░рзНрж╕ ржирж┐рждрзЗ ржкрж╛рж░рзЗ? -> ржЕржирзЗржХржЧрзБрж▓рзЛред
    - ржПржХржЯрж╛ ржХрзЛрж░рзНрж╕рзЗ (ржпрзЗржоржи: SQL) ржХрзЯржЬржи рж╕рзНржЯрзБржбрзЗржирзНржЯ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ? -> ржЕржирзЗржХржЬржиред
* **ржЯрзЗржмрж┐рж▓ ржЪрзЗржирж╛рж░ ржЙржкрж╛рзЯ:** ржПржЦрж╛ржирзЗ рзйржЯрж╛ ржЯрзЗржмрж┐рж▓ рж▓рж╛ржЧрзЗред ржорж╛ржЭржЦрж╛ржирзЗ ржПржХржЯрж╛ **"Bridge Table"** ржмрж╛ **"Pivot Table"** ржерж╛ржХрзЗ (ржпрзЗржоржи: `enrollments`) ржпрзЗржЦрж╛ржирзЗ ржжрзБржЗ ржЯрзЗржмрж┐рж▓рзЗрж░ ID ржерж╛ржХрзЗред



---

## ЁЯТб ржЗржирзНржЯрж╛рж░ржнрж┐ржЙрждрзЗ ржЯрзЗржмрж┐рж▓ ржжрж┐рж▓рзЗ ржпрж╛ ржХрж░ржмрзЗржи (Action Plan)

ржпржжрж┐ ржЗржирзНржЯрж╛рж░ржнрж┐ржЙрзЯрж╛рж░ рзлржЯрж╛ ржЯрзЗржмрж┐рж▓ ржжрзЗрзЯ (ржпрзЗржоржи: `Users`, `Posts`, `Comments`, `Categories`, `Tags`):

1.  **Users <-> Posts:** ржПржХржЬржи ржЗржЙржЬрж╛рж░ ржЕржирзЗржХ ржкрзЛрж╕рзНржЯ ржжрзЗрзЯ, ржХрж┐ржирзНрждрзБ ржПржХржЯрж╛ ржкрзЛрж╕рзНржЯрзЗрж░ рж▓рзЗржЦржХ ржПржХржЬржиред (**One-to-Many**)
2.  **Posts <-> Comments:** ржПржХржЯрж╛ ржкрзЛрж╕рзНржЯрзЗ ржЕржирзЗржХ ржХржорзЗржирзНржЯ ржерж╛ржХрзЗ, ржПржХржЯрж╛ ржХржорзЗржирзНржЯ ржПржХржЯрж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрзЛрж╕рзНржЯрзЗржЗ рж╣рзЯред (**One-to-Many**)
3.  **Posts <-> Categories:** ржПржХржЯрж╛ ржкрзЛрж╕рзНржЯ ржПржХржЯрж╛ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐рждрзЗ ржерж╛ржХрзЗ, ржПржХ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐рждрзЗ ржЕржирзЗржХ ржкрзЛрж╕рзНржЯ ржерж╛ржХрзЗред (**One-to-Many**)
4.  **Posts <-> Tags:** ржПржХржЯрж╛ ржкрзЛрж╕рзНржЯрзЗ ржЕржирзЗржХ ржЯрзНржпрж╛ржЧ ржерж╛ржХрзЗ, ржЖржмрж╛рж░ ржПржХржЯрж╛ ржЯрзНржпрж╛ржЧ (ржпрзЗржоржи: #Tech) ржЕржирзЗржХ ржкрзЛрж╕рзНржЯрзЗ ржерж╛ржХрзЗред (**Many-to-Many**) -> ржПржЦрж╛ржирзЗ ржПржХржЯрж╛ ржорж╛ржЭржЦрж╛ржирзЗрж░ ржЯрзЗржмрж┐рж▓ рж▓рж╛ржЧржмрзЗред

---

### ЁЯФе ржкрзНрж░рзЛ-ржЯрж┐ржк: Foreign Key ржХрзЛржерж╛рзЯ ржмрж╕ржмрзЗ?
- **One-to-Many:** рж╕ржмрж╕ржорзЯ "Many" ржПрж░ ржШрж░рзЗ Foreign Key ржмрж╕ржмрзЗред (ржпрзЗржоржи: Orders ржЯрзЗржмрж┐рж▓рзЗ Customer_ID)ред
- **Many-to-Many:** ржЖрж▓рж╛ржжрж╛ ржирждрзБржи ржЯрзЗржмрж┐рж▓рзЗ ржжрзБржЗржЬржирзЗрж░ ID ржмрж╕ржмрзЗред


___

# ЁЯЧСя╕П SQL Delete Rules (Referential Actions)

ржпржЦржи ржПржХржЯрж╛ ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрзА ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛ рж╣рзЯ, рждржЦржи рждрж╛рж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржлрж░рзЗржи ржХрзАржЧрзБрж▓рзЛрж░ ржУржкрж░ ржХрзА ржкрзНрж░ржнрж╛ржм ржкрзЬржмрзЗ, рждрж╛ ржПржЗ рж░рзБрж▓рж╕ржЧрзБрж▓рзЛ ржарж┐ржХ ржХрж░рзЗред

---

## рзз. ON DELETE CASCADE (рж╕рж╛ржерзЗржЗ ржорж░ржм)
**рж▓ржЬрж┐ржХ:** ржпржжрж┐ Parent ржЯрзЗржмрж┐рж▓рзЗрж░ ржХрзЛржирзЛ рж░рзЛ ржбрж┐рж▓рж┐ржЯ рж╣рзЯ, рждржмрзЗ рждрж╛рж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд Child ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм рж░рзЛ ржЕржЯрзЛржорзЗржЯрж┐ржХ ржбрж┐рж▓рж┐ржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗред
* **ржЙржжрж╛рж╣рж░ржг:** ржПржХржЬржи ржХрж╛рж╕рзНржЯржорж╛рж░ рждрж╛рж░ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржбрж┐рж▓рж┐ржЯ ржХрж░рж▓рзЗ, рждрж╛рж░ ржХрж░рж╛ рж╕ржм ржЕрж░рзНржбрж╛рж░рзЗрж░ ржбрзЗржЯрж╛ржУ ржбрж┐рж▓рж┐ржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗред
* **ржмрзНржпржмрж╣рж╛рж░:** ржпржЦржи Child ржбрзЗржЯрж╛рж░ ржХрзЛржирзЛ ржЖрж▓рж╛ржжрж╛ ржЕрж╕рзНрждрж┐рждрзНржм ржерж╛ржХрж╛рж░ ржжрж░ржХрж╛рж░ ржирзЗржЗред

---

## рзи. ON DELETE SET NULL (ржПрждрж┐ржо рж╣рзЯрзЗ ржпрж╛ржУрзЯрж╛)
**рж▓ржЬрж┐ржХ:** ржпржжрж┐ Parent ржЯрзЗржмрж┐рж▓рзЗрж░ рж░рзЛ ржбрж┐рж▓рж┐ржЯ рж╣рзЯ, рждржмрзЗ Child ржЯрзЗржмрж┐рж▓рзЗрж░ ржлрж░рзЗржи ржХрзА ржХрж▓рж╛ржоржЯрж┐ `NULL` рж╣рзЯрзЗ ржпрж╛ржмрзЗред (рждржмрзЗ ржХрж▓рж╛ржоржЯрж┐ NULL ржПрж▓рж╛ржЙ ржХрж░рждрзЗ рж╣ржмрзЗ)ред
* **ржЙржжрж╛рж╣рж░ржг:** ржЖржкржирж╛рж░ ржХрзЛржорзНржкрж╛ржирж┐рждрзЗ ржПржХржЬржи ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржЫрж┐рж▓, рж╕рзЗ ржЪрж╛ржХрж░рж┐ ржЫрзЗрзЬрзЗ ржжрж┐рзЯрзЗржЫрзЗред ржПржЦржи ржУржЗ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ 'Manager_ID' ржХрж▓рж╛ржоржЯрж┐ ржЦрж╛рж▓рж┐ (NULL) рж╣рзЯрзЗ ржпрж╛ржмрзЗ, ржХрж┐ржирзНрждрзБ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржбрзЗржЯрж╛ ржбрж┐рж▓рж┐ржЯ рж╣ржмрзЗ ржирж╛ред
* **ржмрзНржпржмрж╣рж╛рж░:** ржпржЦржи ржбрзЗржЯрж╛ ржбрж┐рж▓рж┐ржЯ ржирж╛ ржХрж░рзЗ рж╢рзБржзрзБ рж╕ржорзНржкрж░рзНржХржЯрж╛ ржмрж┐ржЪрзНржЫрж┐ржирзНржи ржХрж░рждрзЗ ржЪрж╛ржиред

---

## рзй. ON DELETE RESTRICT / NO ACTION (ржмрж╛ржзрж╛ ржжрзЗржУрзЯрж╛)
**рж▓ржЬрж┐ржХ:** ржпрждржХрзНрж╖ржг Child ржЯрзЗржмрж┐рж▓рзЗ ржХрзЛржирзЛ ржбрзЗржЯрж╛ ржерж╛ржХржмрзЗ, рждрждржХрзНрж╖ржг ржЖржкржирж┐ Parent ржЯрзЗржмрж┐рж▓рзЗрж░ ржУржЗ рж░рзЛ-ржЯрж┐ ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред ржбрзЗржЯрж╛ржмрзЗрж╕ ржЖржкржирж╛ржХрзЗ Error ржжрзЗржЦрж╛ржмрзЗред
* **ржЙржжрж╛рж╣рж░ржг:** ржЖржкржирж┐ ржПржХржЯрж┐ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐ ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗржи, ржХрж┐ржирзНрждрзБ ржУржЗ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐рж░ ржЖржирзНржбрж╛рж░рзЗ ржПржЦржирзЛ рззрзжржЯрж╛ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржЖржЫрзЗред ржбрзЗржЯрж╛ржмрзЗрж╕ ржЖржкржирж╛ржХрзЗ ржмрж▓ржмрзЗтАФ "ржЖржЧрзЗ ржкрзНрж░рзЛржбрж╛ржХрзНржЯржЧрзБрж▓рзЛ рж╕рж░рж╛ржи, рждрж╛рж░ржкрж░ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐ ржбрж┐рж▓рж┐ржЯ ржХрж░рзЗржиред"
* **ржмрзНржпржмрж╣рж╛рж░:** ржнрзБрж▓ржмрж╢ржд ржЗржорзНржкрж░рзНржЯрзНржпрж╛ржирзНржЯ ржбрзЗржЯрж╛ ржбрж┐рж▓рж┐ржЯ рж╣ржУрзЯрж╛ ржерзЗржХрзЗ ржмрж╛ржБржЪрждрзЗред

---

## рзк. ON DELETE SET DEFAULT (ржбрж┐ржлрж▓рзНржЯ ржнрж░рж╕рж╛)
**рж▓ржЬрж┐ржХ:** Parent рж░рзЛ ржбрж┐рж▓рж┐ржЯ рж╣рж▓рзЗ Child ржЯрзЗржмрж┐рж▓рзЗрж░ ржлрж░рзЗржи ржХрзА ржХрж▓рж╛ржоржЯрж┐ ржПржХржЯрж┐ 'Default Value' рждрзЗ рж╕рзЗржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗред
* **ржЙржжрж╛рж╣рж░ржг:** ржХрзЛржирзЛ ржПржХржЬржи ржЯрж┐ржЪрж╛рж░ ржЪрж▓рзЗ ржЧрзЗрж▓рзЗ ржУржЗ ржХрзНрж▓рж╛рж╕рзЗрж░ 'Teacher_ID' ржЕржЯрзЛржорзЗржЯрж┐ржХ 'Admin' ржмрж╛ 'TBA' (To Be Announced) ржЖржЗржбрж┐рждрзЗ рж╕рзЗржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗред

---

## ЁЯТб ржПржХ ржиржЬрж░рзЗ рж╕рж╛ржорж╛рж░рж┐

| Rule | Parent ржбрж┐рж▓рж┐ржЯ рж╣рж▓рзЗ Child-ржПрж░ ржЕржмрж╕рзНржерж╛ |
| :--- | :--- |
| **CASCADE** | рж╕ржм ржбрж┐рж▓рж┐ржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗред |
| **SET NULL** | ржХрж▓рж╛ржоржЯрж┐ ржЦрж╛рж▓рж┐ (NULL) рж╣рзЯрзЗ ржпрж╛ржмрзЗред |
| **RESTRICT** | ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржжрж┐ржмрзЗ ржирж╛ (Error)ред |
| **SET DEFAULT** | ржЖржЧрзЗ ржерзЗржХрзЗ рж╕рзЗржЯ ржХрж░рж╛ ржнрзНржпрж╛рж▓рзБ ржмрж╕ржмрзЗред |

___

### ржХрзЛржб ржЙржжрж╛рж╣рж░ржг (SQL):
```sql
CREATE TABLE Orders (
    OrderID int PRIMARY KEY,
    CustomerID int,
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
    ON DELETE CASCADE -- ржПржЦрж╛ржирзЗ ржЖржкржирж┐ рж░рзБрж▓ рж╕рзЗржЯ ржХрж░рзЗржи
);
```

### тЪЦя╕П WHERE vs HAVING (ржкрж╛рж░рзНржержХрзНржп)

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп | WHERE | HAVING |
| :--- | :--- | :--- |
| **ржХржЦржи ржмрж╕рзЗ?** | GROUP BY ржХрж░рж╛рж░ ржЖржЧрзЗред | GROUP BY ржХрж░рж╛рж░ ржкрж░рзЗред |
| **ржХрж╛ржХрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рзЗ?** | рж╕рж╛ржзрж╛рж░ржг рж░рзЛ (Row) ржХрзЗред | ржЧрзНрж░рзБржк ржмрж╛ ржЕрзНржпрж╛ржЧрзНрж░рж┐ржЧрзЗржЯ (SUM, AVG) ржХрзЗред |
| **ржЕрзНржпрж╛ржЧрзНрж░рж┐ржЧрзЗржЯ ржлрж╛ржВрж╢ржи?** | ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ред | ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ (ржмрж╛ ржХржоржи)ред |
| **ржХрж╛ржЬ** | ржЕржкрзНрж░рзЯрзЛржЬржирзАржпрж╝ рж░рзЛ ржЖржЧрзЗржЗ ржмрж╛ржж ржжрзЗрзЯред | ржЧрзНрж░рзБржк ржХрж░рж╛рж░ ржкрж░ рж╢рж░рзНржд ржЪрзЗржХ ржХрж░рзЗред |

# ЁЯУК GROUP BY ржПрж░ ржХрж╛ржЬ ржХрзА?

**рж╕ржВржЬрзНржЮрж╛:** ржПржХржЗ ржзрж░ржгрзЗрж░ ржнрзНржпрж╛рж▓рзБ ржЖржЫрзЗ ржПржоржи рж░рзЛ ржЧрзБрж▓рзЛржХрзЗ ржПржХрждрзНрж░рж┐ржд ржХрж░рзЗ ржПржХржЯрж┐ рж╕рж╛ржорж╛рж░рж┐ (Summary) рж░рзЗржЬрж╛рж▓рзНржЯ рждрзИрж░рж┐ ржХрж░рж╛ред

### рж╕рж╛ржзрж╛рж░ржгржд ржПржЗ ржлрж╛ржВрж╢ржиржЧрзБрж▓рзЛрж░ рж╕рж╛ржерзЗ ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ:
- `COUNT()` : ржХрждржЧрзБрж▓рзЛ ржЖржЫрзЗ?
- `SUM()` : ржорзЛржЯ ржХржд?
- `AVG()` : ржЧрзЬ ржХржд?
- `MAX() / MIN()` : рж╕ржмржЪрзЗрзЯрзЗ ржмрзЬ ржмрж╛ ржЫрзЛржЯ ржХржд?

---

### ЁЯЫая╕П ржХрж╛ржЬрзЗрж░ ржзрж╛ржк:
- рзз. **SELECT:** ржХрзЛржи ржХрж▓рж╛ржо ржЕржирзБржпрж╛рзЯрзА ржЧрзНрж░рзБржк ржХрж░ржмрзЗржи ржПржмржВ ржХрзА рж╣рж┐рж╕рж╛ржм ржХрж░ржмрзЗржи рждрж╛ рж▓рж┐ржЦрзБржиред
- рзи. **FROM:** ржЯрзЗржмрж┐рж▓рзЗрж░ ржирж╛ржоред
- рзй. **WHERE:** (ржЕржкрж╢ржирж╛рж▓) ржЧрзНрж░рзБржк ржХрж░рж╛рж░ ржЖржЧрзЗ ржХрзЛржирзЛ ржбрзЗржЯрж╛ ржмрж╛ржж ржжрж┐рждрзЗ ржЪрж╛ржЗрж▓рзЗред
- рзк. **GROUP BY:** ржпрзЗ ржХрж▓рж╛ржорзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ ржжрж▓ ржмрж╛ржирж╛ржмрзЗржиред
